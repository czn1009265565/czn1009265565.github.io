# 分布式ID

传统的单体架构的时候，我们基本是单库然后业务单表的结构。每个业务表的ID一般我们都是从1增，通过AUTO_INCREMENT=1设置自增起始值，
但是在分布式服务架构模式下分库分表的设计，使得多个库或多个表存储相同的业务数据。
这种情况根据数据库的自增ID就会产生相同ID的情况，不能保证主键的唯一性。


## 雪花算法
Snowflake，雪花算法是由Twitter开源的分布式ID生成算法，以划分命名空间的方式将 64-bit位分割成多个部分，
每个部分代表不同的含义。而 Java中64bit的整数是Long类型，所以在 Java 中 SnowFlake 算法生成的 ID 就是 long 来存储的。

原理: 时间戳+机器序号+自增数

但是雪花算法强依赖机器时钟，如果机器上时钟回拨，会导致发号重复或者服务会处于不可用状态。
如果恰巧回退前生成过一些ID，而时间回退后，生成的ID就有可能重复。官方对于此并没有给出解决方案，
而是简单的抛错处理，这样会造成在时间被追回之前的这段时间服务不可用。
