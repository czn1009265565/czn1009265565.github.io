## 对象的创建

1. 类加载检查  
   常量池中能否定位到该类的符号引用，若没有则先进行类加载
2. 分配内存  
   分配内存主要包括以下两种方式：指针碰撞和空闲列表。  
   - 指针碰撞 用过的内存与空闲内存由一个指针分隔，分配内存只需要将指针向空闲内存移动对象所需内存大小即可。
   - 空闲列表 维护内存列表，将可用内存分配给该对象，重新记录即可。
3. 初始化零值  
   注意点，这里的零值指的是这些字段类型所对应的零值
4. 设置对象头  
   初始化零值完成之后，虚拟机要对对象进行必要的设置，
   例如这个对象是那个类的实例、如何才能找到类的元数据信息、对象的哈希码、对象的 GC 分代年龄等信息。 这些信息存放在对象头中。 
   另外，根据虚拟机当前运行状态的不同，如是否启用偏向锁等，对象头会有不同的设置方式
5. 执行init方法  
   在上面工作都完成之后，从虚拟机的视角来看，一个新的对象已经产生了，
   但从 Java 程序的视角来看，对象创建才刚开始， 方法还没有执行，所有的字段都还为零。
   所以一般来说，执行 new 指令之后会接着执行 方法，把对象按照程序员的意愿进行初始化，这样一个真正可用的对象才算完全产生出来。